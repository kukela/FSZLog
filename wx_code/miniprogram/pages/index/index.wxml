<view class="page">
  <view class="header_box" hover-class="def_hover" hover-stay-time="150" bindtap="budgetTap">
    <view class="num_box">
      <text class="num">预算:{{m.budget}}</text>
      <text class="num big">剩余:{{m.sP2}}</text>
    </view>
    <view class="all_bar">
      <view class="h_bar _{{m.perType}}" style="width:{{m.per}}%;"></view>
    </view>
  </view>
  <scroll-view class="list" data-weui-theme="{{theme}}" scroll-y type="list">
    <view wx:for="{{m.list}}" wx:key="name" class="cell">
      <view class="main">
        <view class="title" hover-class="def_hover" hover-stay-time="150" data-i="{{index}}" bindtap="cellMainTap">{{item.name}}</view>
        <text class="num big">{{item.sP}}</text>
      </view>
      <block wx:if="{{item.isShowSub}}">
        <view wx:for="{{item.list}}" wx:key="t" class="sub" hover-class="def_hover" hover-stay-time="150" data-i="{{index}}" wx:for-index='s_index' data-i2="{{s_index}}" data-m="{{item}}" bindtap="cellSubTap">
          <text class="title">{{m.date}}-{{item.t}}</text>
          <text class="num big">{{item.p}}</text>
        </view>
      </block>
    </view>
    <view wx:if="{{m.list.length < 1}}" class="cell_no_data">本月还没有数据，快去添加一个吧！</view>
    <view class="cell_bs"></view>
  </scroll-view>
  <button class="add_btn" plain="true" hover-class="def_hover" hover-stay-time="150" bindtap="showAddModalTap">
    <image src='/image/btn_add.png'></image>
  </button>

  <modal-view show="{{showBudgetModal}}" title="设置预算" bindconfirm="budgetModalConfirm">
    <view class="model_cell">
      <input type="digit" placeholder="请输入预算" model:value="{{budgetM_budget}}" />
    </view>
  </modal-view>

  <modal-view show="{{showEditTagListModal}}" title="编辑" bindconfirm="cellSubModalConfirm">
    <pio-input class="model_cell" p="{{editTagListM.p}}" pio="{{editTagListM.pio}}" model:v="{{editTagListM_v}}"></pio-input>
  </modal-view>

  <modal-view show="{{showModal}}" title="添加" bindconfirm="addModalConfirm">
    <view class="model_cell">
      <input maxlength="20" placeholder="请输入标题" value="{{addM.title}}" />
    </view>
    <scroll-view class="model_cell" type="custom" scroll-y="true">
      <view class="item_box">
        <view wx:for="{{tagList}}" wx:key="this" class="item" hover-class="def_hover" hover-stay-time="150" data-i="{{index}}" bindtap="tagTap">{{item}}</view>
      </view>
    </scroll-view>
    <pio-input class="model_cell" p="{{addM.p}}" pio="{{addM.pio}}" model:v="{{addM_piov}}"></pio-input>
  </modal-view>

</view>